sudo: required
language: cpp

env:
  - BUILD_CACHE="ON"
  - BUILD_GRSF_SIM="ON"
  - BUILD_GRSF_SIMMPI="ON"
  - BUILD_GRSF_CONVERTER="ON"
  - BUILD_GRSF_SIMGUI="ON"

env: GCC_VERSION="4.9"

os: linux
dist: trusty
compiler: 
  - gcc

# Install dependencies
install:
  - echo "Git version:"
  - git --version
  
  - export BUILD_CORES=2
  - export ROOT_PATH=`pwd`/..;
  - export CHECKOUT_PATH=`pwd`;
  - echo "ROOT_PATH= $ROOT_PATH"
  - echo "CHECKOUT_PATH= $CHECKOUT_PATH"
  - echo "GRSFramework version:"
  - git describe --tags --abbrev=10
  
  - chmod +x $CHECKOUT_PATH/travis/install_${TRAVIS_OS_NAME}.sh
  - . $CHECKOUT_PATH/travis/install_${TRAVIS_OS_NAME}.sh
 

script:
  - chmod +x $CHECKOUT_PATH/travis/build.sh
  - . $CHECKOUT_PATH/travis/build.sh

after_success:
  - cd $CHECKOUT_PATH
  - git reset --hard HEAD # Discard build artifacts
  - git clean -df # Discard build artifacts
  #- bii init -l
  #- bii user $BIICODE_USER -p $BIICODE_PASSWORD
  #- if [ -n "$BIICODE_PASSWORD" ]; then bii publish -r; fi

notifications:
  email: false
